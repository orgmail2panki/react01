<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChatBot</title>
    <style>
      .chatbot-container {
      }
      .chat-container {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }
      .chat-input-container {
        /* display: flex; */
        flex-grow: 1;
        flex-direction: column;
      }
    </style>
  </head>
  <body>
    <div id="jsContainer" class="chatbot-container"></div>
    <script type="text/javascript" src="react-basics.js"></script>
    <script type="text/javascript" src="react.js"></script>
    <script type="text/javascript" src="react-dom.js"></script>
    <script type="text/javascript" src="babel.js"></script>
    <script type="text/javascript" src="chatbot.js"></script>
    <script type="text/babel">
      function ChatInput({ chatMessages, setChatMessages }) {
        const [inputText, setInputText] = React.useState("");
        function sendMessage() {
          const newChatMessages = [
            ...chatMessages,
            {
              message: inputText,
              sender: "User",
              id: crypto.randomUUID(),
            },
          ];
          setChatMessages(newChatMessages);

          const response = Chatbot.getResponse(inputText);
          setChatMessages([
            ...newChatMessages,
            {
              message: response,
              sender: "Robot",
              id: crypto.randomUUID(),
            },
          ]);
          setInputText("");
        }

        function saveInputText(event) {
          setInputText(event.target.value);
        }

        return (
          <div className="chat-input-container">
            <input
              type="text"
              placeholder="Send a message to chatbox"
              size="30"
              onChange={saveInputText}
              value={inputText}
            />
            <button onClick={sendMessage}>Send</button>
          </div>
        );
      }
      function ChatMessage1(props) {
        // const message = props.message;
        // const sender = props.sender;
        const { message, sender } = props;
        return (
          <div>
            {sender === "Robot" && <img alt="Robot Image" />}
            {message}
            {sender === "User" && <img alt="User Image" />}
          </div>
        );
      }

      function App() {
        const [chatMessages, setChatMessages] = React.useState([
          {
            message: "Hello React",
            sender: "User",
            id: "1",
          },
          {
            message: "How can I help you?",
            sender: "Robot",
            id: "2",
          },
        ]);
        // const chatMessages = array[0];
        // const setChatMessages = array[1];

        return (
          <>
            <ChatInput
              chatMessages={chatMessages}
              setChatMessages={setChatMessages}
            />
            <ChatMessages chatMessages={chatMessages} />
          </>
        );

        // const chatMessageComponent = chatmessages.map((chatmessage) => {
        //   return (
        //     <>
        //       <ChatInput />
        //       <ChatMessage
        //         message={chatmessage.message}
        //         sender={chatmessage.sender}
        //         key={chatmessage.id}
        //       />
        //     </>
        //   );
        // });
        // {
        //   chatMessageComponent;
        // }
      }

      function ChatMessages({ chatMessages }) {
        return (
          <div className="chat-container">
            {chatMessages.map((chatmessage) => {
              return (
                <ChatMessage
                  message={chatmessage.message}
                  sender={chatmessage.sender}
                  key={chatmessage.id}
                />
              );
            })}
          </div>
        );
      }
      function ChatMessage(chatmessage) {
        // const chatmessages = [
        //   {
        //     message: "Hello React",
        //     sender: "User",
        //     id: "1",
        //   },
        //   {
        //     message: "How can I help you?",
        //     sender: "Robot",
        //     id: "2",
        //   },
        // ];
        // return chatmessages.map((chatmessage) => {
        return (
          <div>
            {chatmessage.sender === "Robot" && <img alt="RobotImage" />}
            {chatmessage.message}
            {chatmessage.sender === "User" && <img alt="UserImage" />}
          </div>
        );
      }
      // <div>
      //   {"Hello React"}
      //   <img alt="Robot Image" />
      // </div>
      // {
      //   chatmessages.map((chatmessage) => {
      //     return (
      //       <div>
      //         {sender === "Robot" && <img alt="Robot Image" />}
      //         {chatmessage.message}
      //         {sender === "User" && <img alt="User Image" />}
      //       </div>
      //     );
      //   });
      // }
      // }

      // const app = (
      //   <>
      //     <ChatInput />
      //     <ChatMessage />
      //   </>
      // );

      const container = document.querySelector("#jsContainer");
      const div = (
        <>
          <button>Click Me</button>
          <p>Sample element</p>
        </>
      );
      ReactDOM.createRoot(container).render(<App />);
    </script>
  </body>
</html>
